<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <title>ãƒ—ãƒ¬ã‚¤ãƒ¢ãƒ¼ãƒ‰é¸æŠ</title>
  <link rel="stylesheet" href="/static/css/mode_select.css">
</head>

<body>

  <div class="container">

    <!-- ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼åè¡¨ç¤º -->
    <p id="username-label" class="username"></p>

    <h1 class="title">ğŸ® ãƒ—ãƒ¬ã‚¤ãƒ¢ãƒ¼ãƒ‰é¸æŠ</h1>

    <div class="button-container">
      <button onclick="goSingle()">ğŸ§© ã‚·ãƒ³ã‚°ãƒ«ãƒ—ãƒ¬ã‚¤</button>
      <button onclick="goCreate()">ğŸ  ãƒ«ãƒ¼ãƒ ä½œæˆ</button>
      <button onclick="goJoin()">ğŸ” ãƒ«ãƒ¼ãƒ å‚åŠ </button>
    </div>

    <!-- ğŸ”“ ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ -->
    <div class="logout">
      <button class="logout-btn" onclick="logout()">ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</button>
    </div>

  </div>

  <script>
    // âœ… ãƒ¦ãƒ¼ã‚¶ãƒ¼åè¡¨ç¤º
    const username = localStorage.getItem("username");

    if (username) {
      document.getElementById("username-label").innerText = `ã‚ˆã†ã“ãã€${username} ã•ã‚“ï¼`;
    } else {
      alert("ãƒ­ã‚°ã‚¤ãƒ³æƒ…å ±ãŒã‚ã‚Šã¾ã›ã‚“ã€‚ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚Šã¾ã™ã€‚");
      window.location.href = "/";
    }

    // ç”»é¢é·ç§»
    function goSingle() {
      window.location.href = "/upload";
    }

    function goCreate() {
      window.location.href = "/room/create";
    }

    function goJoin() {
      window.location.href = "/room/join";
    }

    // âœ… ãƒ­ã‚°ã‚¢ã‚¦ãƒˆå‡¦ç†
    function logout() {
      if (confirm("ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã—ã¾ã™ã‹ï¼Ÿ")) {
        localStorage.clear(); // ãƒ­ã‚°ã‚¤ãƒ³æƒ…å ±å‰Šé™¤
        window.location.href = "/";
      }
      localStorage.removeItem('uploadedImage');

      const preview = document.getElementById('completedImagePreview');
      if (preview) {
        preview.src = '';
      }
    }
  </script>

</body>

</html>